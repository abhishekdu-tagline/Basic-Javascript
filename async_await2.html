<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
</head>

<body>
    <script type="text/javascript">
        /// First wr create promise then impliment aynsc/await

        const getUserData = (id) => {
            return new Promise((resolve, reject) => {
                console.log("The get user data from the server");
                setTimeout(() => {
                    resolve({
                        userId: id,
                        name: "Abhishek Dubey",
                    });
                }, 3000);
            });
        };

        const getService = (userData) => {
            return new Promise((resolve, reject) => {
                console.log(`Get Service from ${userData.name} from API`);
                setTimeout(() => resolve(["Email", "VPN", "CDN"]), 3000);
            });
        };

        const getServiceCost = (services) => {
            return new Promise((resolve, reject) => {
                console.log(`Calculate service costs of ${services}.`);
                setTimeout(() => {
                    resolve(services.length * 100);
                }, 3 * 1000);
            });
        };

        //   let result = getUserData(100);
        //   result
        //     .then((user) => {
        //       return getService(user);
        //     })
        //     .then((service) => {
        //      return getServiceCost(service);
        //     }).then((cost) => {
        //         console.log('Total service cost: ' + cost);
        //     });


        /// use async/await for solution of promise chain problem

        const showServicesData = async () => {    //// Example of async/await 
            let user = await getUserData(100)
            let services = await getService(user);
            let cost = await getServiceCost(services);
            console.log("The Total Cost  are: " + cost);
        }

        showServicesData()
    </script>
</body>

</html>